<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ page.title }} | archive-wonjy</title>
  <style>
    :root { --blue:#007BFF; --border:#ddd; --text:#222; --muted:#666; }
    html, body { margin:0; padding:0; font-family:sans-serif; color:var(--text); line-height:1.6; }

    /* Header / Nav */
    header.site { display:flex; align-items:center; gap:40px; padding:20px 24px; border-bottom:1px solid var(--border); }
    .title { font-size:1.2em; font-weight:bold; text-transform: lowercase; }
    nav a { margin-left:24px; text-decoration:none; color:#555; font-size:0.95em; transition: color .2s; }
    nav a:hover, nav a.active { color: var(--blue); }

    /* Main container */
    main { max-width:1200px; margin:0 auto; padding:60px 40px 60px 24px; }

    /* Intro (cover + meta) */
    .intro { display:flex; gap:40px; margin-bottom:0; align-items:flex-start; }
    .intro-image { flex-basis:70%; }
    .intro-image img { width:100%; height:auto; display:block; }
    .intro-image .caption { font-size:0.8em; color:var(--muted); margin-top:3px; margin-bottom:40px; }

    .intro-side { flex:1; font-size:0.95em; color:#333; }
    .intro-group { font-size:0.95em; color:#333; max-width:100%; }
    .intro-header h1 { font-size:1.5em; font-style: italic; font-weight:bold; margin:0 0 4px 0; }
    .intro-header .year { font-size:1.1em; font-weight:bold; color:#888; margin-bottom:16px; }

    .divider { border:none; border-top:1px solid var(--border); margin:30px 0; }

    /* Links */
    a { color: inherit; }
    .text-link { margin-left:8px; text-decoration:none; color: var(--blue); }
    .text-link:hover { text-decoration: underline; }

    /* Common content helpers for work pages */
    img.work { max-width:70%; height:auto; display:block; margin-bottom:3px; }
    .caption { font-size:0.8em; color: var(--muted); margin-bottom:40px; }

    @media (max-width: 768px) {
      .intro { flex-direction: column; }
      .intro-image, .intro-side, .intro-group { flex:none; width:100%; max-width:100%; }
      img.work { max-width:100%; }
    }

    /* Bottom floating bar: © + Back to top */
    #btBar {
      position: fixed; right: 24px; bottom: 20px; z-index: 999;
      display: none; font-size: 0.95em; background: transparent;
    }
    #btBar .copy { color: #888; margin-right: 12px; }
    #btBar a#backToTop { color: var(--blue); text-decoration: none; }
    #btBar a#backToTop:hover { text-decoration: underline; }
    #btBar a#backToTop:focus { outline: none; }
  </style>
</head>
<body>
  <!-- Global header -->
  <header class="site">
    <div class="title"><a href="/">archive-wonjy.com</a></div>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/work.html" class="active">Work</a>
      <a href="/bio.html">Bio</a>
      <a href="/texts.html">Texts</a>
      <a href="/contact.html">Contact</a>
    </nav>
  </header>

  <main>
    {%- comment -%} Year display logic (single / open / range) {%- endcomment -%}
    {%- assign s = page.year_start -%}
    {%- assign e = page.year_end -%}
    {%- if e -%}
      {%- if s == e -%}
        {%- assign year_display = s -%}
      {%- else -%}
        {%- assign year_display = s | append: " – " | append: e -%}
      {%- endif -%}
    {%- else -%}
      {%- assign year_display = s | append: " –" -%}
    {%- endif -%}

    <section class="intro">
      <div class="intro-image">
        {%- if page.cover -%}
          <img src="{{ page.cover | relative_url }}" alt="{{ page.title }} cover" loading="lazy" />
          <div class="caption"><em>{{ page.title }}</em></div>
        {%- endif -%}
      </div>

      <aside class="intro-side">
        <div class="intro-group">
          <div class="intro-header">
            <h1>{{ page.title }}</h1>
            {%- if s -%}<div class="year">{{ year_display }}</div>{%- endif -%}
            {%- if page.type -%}<p><b>Type</b>: {{ page.type }}</p>{%- endif -%}
            {%- if page.status -%}<p><b>Status</b>: {{ page.status }}</p>{%- endif -%}
            {%- if page.tags and page.tags.size > 0 -%}
              <p><b>Tags</b>:
                {%- for t in page.tags -%}
                  <span>{{ t }}{% unless forloop.last %}, {% endunless %}</span>
                {%- endfor -%}
              </p>
            {%- endif -%}
          </div>
        </div>
      </aside>
    </section>

    <hr class="divider" />

    <!-- Page body from each work file -->
    <article>
      {{ content }}
    </article>
  </main>

  <!-- Floating bar: © + Back to top -->
  <div id="btBar" role="region" aria-label="Back to top bar">
    <span class="copy">© Won Jy, ADAGP</span>
    <a id="backToTop" href="#" aria-label="Back to top">Back to top</a>
  </div>

  <script>
    (function(){
      const bar = document.getElementById('btBar');
      const backToTopBtn = document.getElementById('backToTop');
      const showAfter = 300; // px

      window.addEventListener('scroll', ()=>{
        bar.style.display = (window.scrollY > showAfter) ? 'flex' : 'none';
      });

      backToTopBtn.addEventListener('click', (e)=>{
        e.preventDefault();
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduce) window.scrollTo(0,0); else window.scrollTo({ top:0, behavior:'smooth' });
      });
    })();
  </script>
</body>
</html>
