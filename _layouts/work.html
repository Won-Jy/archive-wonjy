<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ page.title }} | archive-wonjy.com</title>
  <link rel="icon" href="/favicon.png" type="image/x-icon">
<style>
  :root{--blue:#007BFF;--border:#ddd;--text:#222;--muted:#666}
  html,body{margin:0;padding:0;font-family:sans-serif;color:var(--text);line-height:1.6}
  header.site{display:flex;align-items:center;gap:40px;padding:20px 40px;border-bottom:1px solid var(--border)}
  .title{font-size:1.2em;font-weight:600;text-transform:lowercase}
  .title:link,.title:visited{color:#000;text-decoration:none}
  .title:hover{color:var(--blue);text-decoration:none}
  nav{margin-left:15px}
  nav a{margin-left:24px;text-decoration:none;color:#555;font-size:.95em;transition:color .2s}
  nav a:hover,nav a.active,nav a[aria-current="page"]{color:var(--blue)}
  main{max-width:1200px;margin:0;padding:60px 40px}
  .intro{display:grid;grid-template-columns:70% 1fr;grid-column-gap:40px;grid-row-gap:24px;align-items:start;margin-bottom:40px;grid-template-areas:"cover side" "media side"}
  .intro-cover{grid-area:cover;min-width:0}
  .intro-side{grid-area:side;min-width:0;font-size:.95em;color:#333}
  .intro-media{grid-area:media;min-width:0}
  .intro-cover figure{margin:0}
  .intro-cover img{width:100%;height:auto;display:block}
  .intro-cover .caption{font-size:.8em;color:var(--muted);margin-top:3px;margin-bottom:40px}
  .intro-group{max-width:100%}
  .intro-header h1{font-size:clamp(1.4em,2vw,1.6em);font-style:italic;font-weight:600;margin:0 0 4px}
  .intro-header .year{font-size:1.05em;font-weight:500;color:#777;margin-bottom:16px}
  .meta-row{margin:0 0 4px}
  .meta-row .label{color:#777;margin-right:6px}
  .meta-row .value{color:#333}
  .divider{border:none;border-top:1px solid var(--border);margin:30px 0}
  .intro-sep{display:none}
  .rich p{margin:0 0 1em}
  .rich a{color:var(--blue);text-decoration:none}
  .rich a:hover,.rich a:focus{text-decoration:underline}
  .section-title{margin:0 0 8px;font-size:1em;color:#555}
  .intro-media figure.work{margin:0}
  .intro-media img.work{width:100%;height:auto;display:block;margin-bottom:3px}
  .caption{font-size:.8em;color:var(--muted);margin-bottom:40px}
  .intro-media figure.work.video{width:100%;margin:0;display:block}
  .intro-media figure.work.video .frame{position:relative;width:100%;height:0;padding-bottom:56.25%;margin-bottom:3px}
  .intro-media figure.work.video .frame iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0;display:block}
  .linked-works{list-style:none;margin:8px 0 0;padding:0}
  .linked-works li{margin:0 0 6px;position:relative;padding-left:14px}
  .linked-works li::before{content:"–";position:absolute;left:0;color:var(--muted)}
  .linked-works a{color:var(--blue);text-decoration:none;margin-left:6px}
  .linked-works a:hover{text-decoration:underline}
  .related-texts{list-style:none;margin:8px 0 0;padding:0}
  .related-texts li{margin:0 0 6px;position:relative;padding-left:14px}
  .related-texts li::before{content:"–";position:absolute;left:0;color:var(--muted)}
  .related-texts a{color:var(--blue);text-decoration:none;margin-left:6px}
  .related-texts a:hover{text-decoration:underline}
  .related-texts li:not(:has(a)),.related-texts li:empty{display:none}
  #btBar{position:fixed;right:24px;bottom:20px;z-index:999;display:none;font-size:.95em;background:transparent;gap:16px}
  #btBar .copy{color:#888}
  #btBar a#backToTop{color:var(--blue);text-decoration:none}
  #btBar a#backToTop:hover{text-decoration:underline}
  #btBar a#backToTop:focus-visible{outline:2px solid var(--blue);outline-offset:2px}
  .lb-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:9999;padding:24px}
  .lb-overlay.open{display:flex}
  .lb-stage{position:relative;max-width:92vw;max-height:86vh;display:flex;flex-direction:column;align-items:center;gap:12px}
  .lb-media{max-width:92vw;max-height:74vh;display:block;object-fit:contain;background:#111}
  .lb-caption{color:#eee;font-size:.9em;line-height:1.4;text-align:center;max-width:92vw}
  .lb-ctrl{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0);border:none;cursor:pointer;padding:8px 10px;font-size:22px;line-height:1;color:#ddd}
  .lb-ctrl:hover,.lb-ctrl:active{color:var(--blue)}
  .lb-prev{left:-10px}
  .lb-next{right:-10px}
  .lb-close{position:absolute;top:-25px;right:-5px;background:transparent;border:none;cursor:pointer;font-size:20px;line-height:1;color:#ddd;z-index:10}
  .lb-close:hover,.lb-close:active{color:var(--blue)}
  .lb-counter{position:absolute;bottom:-22px;right:0;color:#bbb;font-size:.8em}
  .lb-footer{display:flex;align-items:center;justify-content:center;gap:14px;margin-top:4px}
  .lb-footer .lb-ctrl{position:static;transform:none;background:transparent;border:none;cursor:pointer;padding:6px 12px;font-size:20px;line-height:1;color:#ddd}
  .lb-footer .lb-ctrl:hover,.lb-footer .lb-ctrl:active{color:var(--blue)}
  .lb-footer .lb-counter{position:static;color:#bbb;font-size:.85em;line-height:1;min-width:52px;text-align:center}
  .lb-ctrl:focus-visible,.lb-close:focus-visible{outline:2px solid var(--blue);outline-offset:2px}
  .lb-overlay .lb-ctrl,.lb-overlay .lb-close{-webkit-tap-highlight-color:transparent}
  .lb-video{display:none;background:#000;max-width:92vw;max-height:74vh;width:min(92vw,calc(74vh * var(--ratio,16/9)));height:min(74vh,calc(92vw / var(--ratio,16/9)))}
  .lb-video iframe{width:100%;height:100%;display:block;border:0}
  @media (max-width:768px){
    header.site{display:flex;flex-direction:column;align-items:flex-start;padding:16px 20px;border-bottom:1px solid #ddd;gap:0}
    header.site .title{align-self:flex-start;margin-bottom:0}
    header.site nav{margin:12px 0 0 0}
    header.site nav a{margin-left:30px;color:#555;font-size:1.05em}
    header.site nav a:first-child{margin-left:0}
    main{padding:30px 20px 50px 24px}
    .intro{grid-template-columns:1fr;grid-row-gap:24px;grid-template-areas:"cover" "side" "sep" "media"}
    .intro-cover .caption{margin-bottom:12px}
    .intro-side .divider{margin:0}
    .intro-side .rich.description + .divider{margin-top:16px;margin-bottom:14px}
    .intro-side .divider + .section-title:first-of-type{margin-top:10px}
    .intro-side .section-title:first-of-type + .linked-works{margin-top:6px}
    .intro-side .linked-works + .divider{margin-top:18px;margin-bottom:10px}
    .intro-side .section-title + .related-texts,.intro-side .section-title + .rich.critique{margin-top:6px}
    .intro-side .divider + .rich.description{margin-top:16px}
    .intro-side .divider + .rich.summary{margin-top:16px}
    .intro-side .rich.summary + .divider{margin-top:14px}
    .intro-side .intro-header + .divider{margin-top:14px}
    .intro-media .caption{margin-bottom:25px}
    .intro{grid-row-gap:0}
    .intro-sep{display:block;grid-area:sep;margin-top:18px;margin-bottom:12px}
    .lb-prev{left:-4px;padding:10px 12px}
    .lb-next{right:-4px;padding:10px 12px}
    .lb-close{top:-30px;right:-6px;font-size:22px}
    .lb-caption{font-size:.85em;line-height:1.5;padding:0 10px}
    .lb-footer{gap:20px}
    .lb-footer .lb-ctrl{padding:10px 14px;font-size:24px}
  }
</style>
</head>
<body>
  <header class="site">
    <a href="/index.html" class="title">archive-wonjy.com</a>
    <nav>
      <a href="/index.html">Home</a>
      <a href="/work.html" class="active" aria-current="page">Work</a>
      <a href="/bio.html">Bio</a>
      <a href="/texts.html">Texts</a>
      <a href="/contact.html">Contact</a>
    </nav>
  </header>

  <main>
    <!-- (본문 부분은 동일, 생략) -->
  </main>

  <!-- Lightbox -->
  <div class="lb-overlay" id="lbOverlay" aria-modal="true" role="dialog" aria-label="Image viewer">
    <div class="lb-stage">
      <button class="lb-close" id="lbClose" aria-label="Close">×</button>
      <img id="lbImg" class="lb-media" alt="">
      <div id="lbVideo" class="lb-video">
        <iframe id="lbIframe" src="" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen tabindex="-1"></iframe>
      </div>
      <div class="lb-caption" id="lbCap"></div>
      <div class="lb-footer" aria-label="image navigation">
        <button class="lb-ctrl lb-prev" id="lbPrev" aria-label="Previous">‹</button>
        <div class="lb-counter" id="lbCount"></div>
        <button class="lb-ctrl lb-next" id="lbNext" aria-label="Next">›</button>
      </div>
    </div>
  </div>

  <div id="btBar"><span class="copy">© ADAGP, Paris, 2025</span>
    <a id="backToTop" href="#">Back to top</a>
  </div>

  <script src="https://player.vimeo.com/api/player.js"></script>
  <script>
    (function(){
      const gallery=[],overlay=document.getElementById('lbOverlay');
      const lbImg=document.getElementById('lbImg'),lbVideo=document.getElementById('lbVideo'),lbIframe=document.getElementById('lbIframe');
      const lbCap=document.getElementById('lbCap'),lbPrev=document.getElementById('lbPrev'),lbNext=document.getElementById('lbNext'),lbClose=document.getElementById('lbClose'),lbCount=document.getElementById('lbCount');
      let idx=0,open=false,lbPlayer=null,didPushState=false;

      function onPopStateCloseLB(){ if(open) closeLB(); }
      function vimeoIdFromUrl(u){const m=String(u||'').match(/vimeo\.com\/(?:video\/)?(\d+)/);return m?m[1]:null;}
      async function stopVideo(){try{if(lbPlayer&&typeof lbPlayer.unload==='function'){await lbPlayer.unload();}}catch(e){}}
      function preloadAround(index){
        const prev=gallery[(index-1+gallery.length)%gallery.length],next=gallery[(index+1)%gallery.length];
        [prev,next].forEach(it=>{if(it&&it.type==='image'){const im=new Image();im.src=it.src;}});
      }

      async function show(i){
        idx=(i+gallery.length)%gallery.length;
        const it=gallery[idx];
        lbCap.innerHTML=it.caption||''; lbCount.textContent=(idx+1)+'/'+gallery.length;

        if(it.type==='video'){
          lbImg.style.display='none'; lbVideo.style.display='block'; lbVideo.style.setProperty('--ratio','16/9');
          const vid=vimeoIdFromUrl(it.src);
          try{
            if(!lbPlayer){
              lbPlayer=new Vimeo.Player(lbIframe,{id:vid||undefined,autoplay:true,muted:true,playsinline:true,byline:false,title:false,portrait:false});
            }else{
              stopVideo(); if(vid) await lbPlayer.loadVideo(vid);
            }
            try{await lbPlayer.play();}
            catch(e){
              const oncePlay=()=>{lbPlayer.play().catch(()=>{});overlay.removeEventListener('click',oncePlay,true);overlay.removeEventListener('touchend',oncePlay,true);};
              overlay.addEventListener('click',oncePlay,true);overlay.addEventListener('touchend',oncePlay,true);
            }
            try{const [w,h]=await Promise.all([lbPlayer.getVideoWidth(),lbPlayer.getVideoHeight()]);if(w&&h) lbVideo.style.setProperty('--ratio',String(w/h));}catch(e){}
          }catch(e){lbIframe.src=it.src;}
        }else{
          lbVideo.style.display='none'; lbImg.src=it.src; lbImg.alt=it.el.getAttribute('alt')||''; lbImg.style.display='block';
          setTimeout(()=>{stopVideo();},0); preloadAround(idx);
        }
      }

      function openLB(i){
        show(i); overlay.classList.add('open'); document.body.style.overflow='hidden'; open=true;
        if(!didPushState){history.pushState({lightbox:true},'',location.href);didPushState=true;window.addEventListener('popstate',onPopStateCloseLB);}
      }
      function closeLB(){
        overlay.classList.remove('open'); document.body.style.overflow=''; open=false;
        try{lbIframe&&lbIframe.blur&&lbIframe.blur();}catch(e){} stopVideo();
        if(didPushState){window.removeEventListener('popstate',onPopStateCloseLB);didPushState=false;setTimeout(()=>history.back(),0);}
      }
      function next(){show(idx+1);} function prev(){show(idx-1);}
      lbClose.addEventListener('click',closeLB); lbNext.addEventListener('click',next); lbPrev.addEventListener('click',prev);
      overlay.addEventListener('click',(e)=>{if(e.target===overlay) closeLB();});
      document.addEventListener('keydown',(e)=>{if(!open) return; if(e.key==='Escape') closeLB(); else if(e.key==='ArrowRight') next(); else if(e.key==='ArrowLeft') prev();});
    })();
  </script>
</body>
</html>
