---
title: Work
layout: none
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Work | archive-wonjy</title>
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
</head>
<body>
  <header>
    <a class="title" href="{{ '/' | relative_url }}">archive-wonjy</a>
    <nav>
      <a href="{{ '/work.html' | relative_url }}" class="active">work</a>
      <a href="{{ '/texts.html' | relative_url }}">texts</a>
      <a href="{{ '/contact.html' | relative_url }}">contact</a>
    </nav>
  </header>

  <main class="list">
    <!-- 필터/검색 영역 -->
    <div class="filters">
      <select id="yearFilter"></select>
      <select id="typeFilter"></select>
      <input id="searchBox" placeholder="Search works…">
    </div>

    <!-- 카드 그리드 -->
    <div id="grid" class="grid"></div>

    <!-- 페이지네이션 -->
    <div id="pagination" class="pagination"></div>
  </main>

  <script>
  const PER_PAGE = 12;
  const state = { page:1 };
  let data = [];

  // 필터/검색 관련 함수들
  function matchesFilters(d){ /* ...기존 코드 유지... */ return true; }
  async function matchesQuery(d){ /* ...기존 코드 유지... */ return true; }
  function sortItems(items){ /* ...기존 코드 유지... */ return items; }
  function updatePagination(total){ /* ...기존 코드 유지... */ }

  async function render() {
    let items = [];
    for (const d of data) {
      if (matchesFilters(d) && await matchesQuery(d)) {
        items.push(d);
      }
    }
    items = sortItems(items);

    const total = Math.max(1, Math.ceil(items.length / PER_PAGE));
    if (state.page > total) state.page = total;

    const start = (state.page - 1) * PER_PAGE;
    const slice = items.slice(start, start + PER_PAGE);

    grid.innerHTML = slice.map(it => {
      const cover = it.cover || '';
      const title = it.title || '';
      const typeLabel = (it._types || []).join(', ');
      const yearText =
        it.year_start
          ? (it.year_end
              ? (it.year_end === it.year_start
                  ? `${it.year_start}`
                  : `${it.year_start}–${it.year_end}`)
              : `${it.year_start}–`)
          : '';
      const url = it.url || '#';

      return `
        <a class="card" href="${url}">
          <div class="thumb">
            <img src="${cover}" alt="${title}">
            <div class="hover">
              <div class="meta">
                <div class="title">${title}</div>
                <div class="info">${[typeLabel, yearText].filter(Boolean).join(', ')}</div>
              </div>
            </div>
          </div>
        </a>
      `;
    }).join('');

    updatePagination(total);
  }

  // 초기 데이터 로드
  fetch('{{ "/assets/data/work.json" | relative_url }}')
    .then(r=>r.json())
    .then(json=>{
      data = json;
      render();
    });
  </script>
</body>
</html>
