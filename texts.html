---
layout: none
title: Texts
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Texts | archive-wonjy</title>
  <meta name="description" content="Won Jy's personal archiving site.">
  <link rel="icon" href="/favicon.png" type="image/x-icon">

<style>
  :root { --blue:#007BFF; --border:#ddd; --text:#222; --muted:#666; }
  html,body{margin:0;padding:0;font-family:sans-serif;line-height:1.6;color:var(--text)}
  header{display:flex;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}
  .title{font-size:1.2em;font-weight:bold;text-transform:lowercase}
  .title:link,
  .title:visited{color:#000;text-decoration:none;}
  .title:hover{color:var(--blue);text-decoration:none;}
  nav{margin-left:55px}
  nav a{margin-left:24px;text-decoration:none;color:#555;font-size:.95em;transition:color .2s}
  nav a:hover,nav a.active{color:var(--blue)}

  /* 목록 화면 */
  :root{
  --page-width: 1200px;
  --page-left: 24px;
  --pager-bottom: 220px;
  --pager-height: 22px;
  --gap-after-list: 5px;
  /* 추가: 목록 블록의 고정 높이 (예: 560px) */
  --list-height: 560px;
  }
  main.list{
  padding:50px 40px 10px 24px;
  max-width:740px;
  margin:0;
  min-height:400px;           /* 있어도 무방하지만 아래 height가 우선합니다 */
  position: static;           /* relative 불필요 */
  height: var(--list-height); /* ← 세로 고정 */
  padding-bottom: 0;          /* 아래에서 페이지네이션이 차지하므로 0 */
  }
  .items{display:flex;flex-direction:column;gap:10px}

  /* ▼ 목록에서만 링크 스타일 적용 (본문·사이드바엔 영향 없음) */
  main.list a{
    color: inherit;              /* 기본: 일반 글씨색 */
    text-decoration: none;
  }
  main.list a:hover,
  main.list a:active{
    color: var(--blue);          /* Hover/Active: 파랑 */
    text-decoration: none;
  }
  main.list a:visited{
    color: inherit;              /* 방문 흔적 제거 */
    text-decoration: none;
  }

  .text-link{
    display:block;
    padding:8px 10px;
    border:none;
    text-decoration:none;
    color: inherit;              /* 기본: 일반 글씨색 */
  }
  .text-link:hover,
  .text-link:active,
  .text-link:focus{
    color:var(--blue);           /* Hover/Active: 파랑 */
    text-decoration:none;
    border:none;
    outline:none;
  }
  .text-link:visited{
    color: inherit;              /* 방문 흔적 제거 */
  }

  /* 목록 항목 링크의 자식 텍스트(span)도 색 바꾸기 */
.text-link:hover .text-title,
.text-link:hover .author,
.text-link:hover .year,
.text-link:active .text-title,
.text-link:active .author,
.text-link:active .year,
.text-link:focus .text-title,
.text-link:focus .author,
.text-link:focus .year{
  color: var(--blue);
}

  .text-title{font-style:italic}
  .meta-sep{ margin:0 6px 0 0; color:var(--muted); }
  .author,.year{color:#444}

  .pagination{
  position: static;                 /* 고정 해제 */
  max-width: 740px;                 /* 리스트와 같은 폭 */
  margin: 16px 40px 40px 24px;      /* 리스트와 같은 좌우 여백 (좌 24 / 우 40) */
  text-align: center;               /* 중앙 정렬 */
  }
  .pagination a{
  margin: 0 6px;
  text-decoration:none;
  color:#000;
  font-size:.95em;
  }
  .pagination a:hover,
.pagination a.active{ color:var(--blue); }

/* 본문/사이드바 링크: 방문 흔적 제거 + 기존 느낌 유지 */
main.detail article a,
main.detail aside a{
  color: var(--blue);          /* 기본 파랑, 밑줄 없음 */
  text-decoration: none;
}
main.detail article a:hover,
main.detail article a:active,
main.detail aside a:hover,
main.detail aside a:active{
  color: var(--blue);
  text-decoration: underline;  /* Hover/Active에서만 밑줄 */
}
main.detail article a:visited,
main.detail aside a:visited{
  color: var(--blue);          /* 방문 후에도 파랑 유지 */
  text-decoration: none;
}
  
  /* 상세 화면 */
  main.detail{
    display:grid;
    grid-template-columns: auto 320px;
    gap:16px;
    max-width:1200px;
    margin:0;
    padding:50px 40px 60px 24px;
  }
  #detailArticle{ width:min(90ch, 100%); }
  @media (max-width:960px){
    main.detail{grid-template-columns:1fr}
    #detailArticle{ width:100%; }
    aside{position:static}
  }

  article .text-body, article .notes{ max-width:100%; }
  aside{ position:static; top:24px; align-self:start }

  h1,h2,h3,h4{font-weight:bold;margin:.2em 0 .4em}
  .meta{display:flex;align-items:center;gap:8px;margin:.25rem 0 .75rem;color:var(--muted);font-size:.95em;font-weight:bold;}

  .lang-tabs{display:flex;gap:8px;margin:.5rem 0 1rem}
  .lang-tabs button{
    border:none;background:#fff;padding:0;font:inherit;cursor:pointer;color:#444
  }
  .lang-tabs button:hover{color:var(--blue)}
  .lang-tabs button.active{color:var(--blue)}
  .lang-tabs .orig-badge{margin-left:6px;font-size:.8em;color:var(--muted)}

  .notes{margin-top:24px}
  .notes ol{margin:0;padding-left:20px}
  article .notes li{ margin:.6rem 0; }
  .note-ref{cursor:pointer;text-decoration:none;color:var(--blue)}
  .note-num{color:var(--blue);text-decoration:none;margin-right:6px}
  .note-num:hover{text-decoration:underline}

  .tooltip{
    position:fixed;z-index:1000;max-width:360px;border:1px solid var(--blue);background:#fff;
    padding:8px 10px;box-shadow:0 2px 10px rgba(0,0,0,.08);font-size:.95em;display:none
  }

  .aside-block{padding:14px 0}
  .divider{height:1px;background:var(--border);margin:16px 0}

  main.detail article .divider{ max-width:100%; width:100%; margin:32px 0; }
  main.detail aside .divider{ max-width:none; width:100%; }

  #backToTop{
    position: fixed;
    right: 24px;
    bottom: 20px;
    display: none;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    color: var(--blue);
    text-decoration: none;
    font-size: .95em;
  }
  #backToTop:hover{ text-decoration: underline; }
  #backToTop:focus-visible{ outline:2px solid var(--blue); outline-offset:2px; }

  .link-button {
    display: inline-block;
    border: none;
    padding: 0;
    text-decoration: none;
    color: var(--blue);
    font-size: 0.95em;
    line-height: 1.4;
  }
  .link-button:hover,
  .link-button:focus,
  .link-button:active {
    color: var(--blue);
    text-decoration: underline;
    outline: none;
  }
  .link-button:visited {
    color: var(--blue);
    text-decoration: none;
  }

  .notes .notes-list{
    list-style:none;
    padding-left:0;
    margin-left:0;
  }
  .notes .notes-list li{ padding-left:0; }

  article .notes{
    font-size:0.96em;
    line-height:1.55;
  }
  article .notes h3{ margin:0 0 8px 0; }

  .link-button span { white-space: nowrap; }

  /* Related works: 불릿 제거 + 대시 */
  .related-works {
    list-style: none;
    margin: 8px 0 0;
    padding: 0;
  }
  .related-works li {
    margin: 0 0 6px 0;
    position: relative;
    padding-left: 14px;
  }
  .related-works li::before {
    content: "–";
    position: absolute;
    left: 0;
    color: var(--muted);
  }
  .related-works a {
    color: var(--blue);
    text-decoration: none;
  }
  .related-works a:hover,
  .related-works a:active {
    text-decoration: underline;
  }
  .related-works a:visited {
    color: var(--blue);
    text-decoration: none;
  }

/* 텍스트 본문 이미지+캡션을 work와 동일하게 보이게 */
.text-body figure.text-image{ margin:0; }
.text-body figure.text-image img{
  width:75%; height:auto; display:block; margin:0 auto 3px; /* 가운데 정렬 */
}
.text-body figure.text-image .caption{
  max-width:75%;            /* 이미지와 동일 폭 */
  margin:0 auto 40px;       /* 가운데 정렬 + 아래 여백 40px */
  font-size:0.8em;          /* work .caption과 동일 */
  color:var(--muted);       /* work .caption과 동일 */
  text-align:left;          /* work 느낌대로 왼쪽 정렬 */
}
  
.label-box{
  border:2px solid #000;
  padding:20px;
  margin:40px auto;
  max-width:75%;
  font-size:0.95em;
  line-height:1.6;
  background:#fff;
}

/* 타이틀(헤더의 왼쪽 로고 텍스트)만 확실히 hover 파랑 */
header .title:link,
header .title:visited { color:#000; text-decoration:none; }

header .title:hover,
header .title:active { color:var(--blue) !important; text-decoration:none; }

  <link rel="stylesheet" href="{{ '/assets/css/responsive.css' | relative_url }}">
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">

</style>

</head>
<body>
<header>
  <a href="index.html" class="title">archive-wonjy.com</a>
  <nav>
    <a href="/index.html">Home</a>
    <a href="/work.html">Work</a>
    <a href="/bio.html">Bio</a>
    <a href="/texts.html" class="active">Texts</a>
    <a href="/contact.html">Contact</a>
  </nav>
</header>

<main class="list" id="listView" hidden>
  <div id="items" class="items"></div>
</main>
<div id="pager" class="pagination" hidden></div>

<main class="detail" id="detailView" hidden>
  <article id="detailArticle"></article>
  <aside id="detailAside"></aside>
</main>

<a id="backToTop" href="#" aria-label="Back to top">Back to top</a>
<div id="tooltip" class="tooltip"></div>

<script>
const DATA = {
  {% for pair in site.data.texts %}
    {% assign id = pair[0] %}{% assign t = pair[1] %}
    "{{ id }}": {{ t | jsonify }}{% unless forloop.last %},{% endunless %}
  {% endfor %}
};

const params = new URLSearchParams(location.search);
const currentId = params.get('id');

if (currentId && DATA[currentId]) {
  renderDetail(currentId);
} else {
  renderList();
}

function renderList(){
  document.getElementById('listView').hidden = false;
  document.getElementById('pager').hidden = false;
  const arr = Object.entries(DATA).map(([id,t])=>({
    id,
    title_html: t.title_original?.text_html || '',
    author: t.author?.name || '',
    year: t.year || ''
  }));
  arr.sort((a,b)=>{
    const ya = parseInt(a.year,10)||0, yb = parseInt(b.year,10)||0;
    if (yb!==ya) return yb-ya;
    return (a.title_html||'').localeCompare(b.title_html||'', undefined, {sensitivity:'base'});
  });
  const perPage = 10; let page = 1;
  const itemsEl = document.getElementById('items');
  const pagerEl = document.getElementById('pager');
  function draw(){
    const start = (page-1)*perPage, end = start+perPage;
    itemsEl.innerHTML = '';
    arr.slice(start,end).forEach(it=>{
      const a = document.createElement('a');
      a.className = 'text-link';
      a.href = `?id=${encodeURIComponent(it.id)}`;
      a.innerHTML =
        `<span class="text-title">${it.title_html}</span>`+
        `<span class="meta-sep">,</span><span class="author">${it.author}</span>`+
        `<span class="meta-sep">,</span><span class="year">${it.year}</span>`;
      itemsEl.appendChild(a);
    });
    const total = Math.max(1, Math.ceil(arr.length/perPage));
    pagerEl.innerHTML = '';
    for(let i=1;i<=total;i++){
      if(i>1) pagerEl.appendChild(document.createTextNode(' / '));
      const link = document.createElement('a'); link.href='#'; link.textContent=i;
      if(i===page) link.classList.add('active');
      link.addEventListener('click', e=>{
        e.preventDefault(); page=i; draw(); window.scrollTo({top:0,behavior:'smooth'});
      });
      pagerEl.appendChild(link);
    }
  }
  draw();
}

function renderDetail(id){
  const t = DATA[id];
  document.getElementById('detailView').hidden = false;
  const article = document.getElementById('detailArticle');
  const aside = document.getElementById('detailAside');
  const origLang = (t.original?.language || 'fr').toLowerCase();

  const notesCounts = {};
  notesCounts[origLang] = (t.original?.notes || []).length;
  (t.translations || []).forEach(tr => {
    notesCounts[tr.language] = (tr.notes || []).length;
  });
  const hasAnyNotes = Object.values(notesCounts).some(n => n > 0);

  article.innerHTML = `
    <h1 class="text-title">${t.title_original?.text_html || ''}</h1>
    <div class="meta"><span>${t.author?.name || ''}, ${t.year || ''}</span></div>

    <div class="lang-tabs" id="langTabs">
      <button class="lang-btn" data-lang="${origLang}">(${origLang.toUpperCase()})<span class="orig-badge">orig.</span></button>
      ${(t.translations||[]).map(tr=>`<button class="lang-btn" data-lang="${tr.language}">(${String(tr.language).toUpperCase()})</button>`).join('')}
    </div>

    <div class="text-variants">
      <div class="text-body variant" data-lang="${origLang}">
        ${t.original?.body_html || ''}
      </div>
      ${(t.translations||[]).map(tr=>`
        <div class="text-body variant" data-lang="${tr.language}" style="display:none">
          ${tr.body_html || ''}
        </div>
      `).join('')}
    </div>

    ${hasAnyNotes ? `
    <div id="notesDivider" class="divider"></div>
    <section id="notesSection" class="notes">
      <h3>Notes</h3>
      <ol class="notes-variants">
        <li style="list-style:none;padding:0;margin:0">
          <ol class="notes-list variant" data-lang="${origLang}">
            ${(t.original?.notes||[]).map(n=>`
              <li id="fn-${n.id}-${origLang}">
                <a class="note-num" href="#fnref-${n.id}-${origLang}">[${n.id}]</a> ${n.html}
              </li>
            `).join('')}
          </ol>
        </li>
        ${(t.translations||[]).map(tr=>`
          <li style="list-style:none;padding:0;margin:0">
            <ol class="notes-list variant" data-lang="${tr.language}" style="display:none">
              ${(tr.notes||[]).map(n=>`
                <li id="fn-${n.id}-${tr.language}">
                  <a class="note-num" href="#fnref-${n.id}-${tr.language}">[${n.id}]</a> ${n.html}
                </li>
              `).join('')}
            </ol>
          </li>
        `).join('')}
      </ol>
    </section>
    ` : ``}
  `;

function isEmpty(val){
  if (val == null) return true;
  if (Array.isArray(val)) return val.length === 0;
  if (typeof val === 'string') return val.trim() === '';
  return false;
}

const asideBlocks = [];

// Related works
if (!isEmpty(t.related_works)) {
  asideBlocks.push(`
    <div class="aside-block">
      <h4>Related works</h4>
      <ul class="related-works">
        ${(t.related_works || []).map(r => {
          const label = r.label || 'View';
          return `<li><a href="/${r.slug}.html" class="link-button">${label}</a></li>`;
        }).join('')}
      </ul>
    </div>
  `);
}

// Source
if (!isEmpty(t.source_html)) {
  const sourceHtml = Array.isArray(t.source_html)
    ? t.source_html.join('')
    : t.source_html;
  if (!isEmpty(sourceHtml)) {
    asideBlocks.push(`
      <div class="aside-block">
        <h4>Source</h4>
        ${sourceHtml}
      </div>
    `);
  }
}

// Author (항상 출력 — 원하면 조건 추가 가능)
asideBlocks.push(`
  <div class="aside-block">
    <h4>Author</h4>
    ${t.author?.bio_html || ''}
  </div>
`);

// 구분선 넣어서 연결
aside.innerHTML = asideBlocks.filter(Boolean).join('<div class="divider"></div>');

  // 외부 링크는 새 탭
  aside.querySelectorAll('a').forEach(a => {
    a.setAttribute('target', '_blank');
    a.setAttribute('rel', 'noopener noreferrer');
  });
  article.querySelectorAll('.notes a').forEach(a => {
  const href = a.getAttribute('href') || '';
  if (href.startsWith('#')) {
    a.removeAttribute('target');
    a.removeAttribute('rel');
  } else if (/^https?:\/\//i.test(href)) {
    a.setAttribute('target', '_blank');
    a.setAttribute('rel', 'noopener noreferrer');
  }
});

  const tabs = Array.from(article.querySelectorAll('.lang-btn'));
  const variants = Array.from(article.querySelectorAll('.variant'));
  const tooltip = document.getElementById('tooltip');

  function setLang(lang){
    tabs.forEach(b=>b.classList.toggle('active', b.dataset.lang===lang));
    variants.forEach(v=> v.style.display = (v.dataset.lang===lang) ? '' : 'none');
    const url = new URL(location); url.searchParams.set('id', id); url.searchParams.set('lang', lang); history.replaceState({}, '', url);
    wireFootnotes(lang);

    if (hasAnyNotes) {
      const notesDiv = article.querySelector('#notesDivider');
      const notesSec = article.querySelector('#notesSection');
      const hasThisLangNotes = (notesCounts[lang] || 0) > 0;
      [notesDiv, notesSec].forEach(el => {
        if (el) el.style.display = hasThisLangNotes ? '' : 'none';
      });
    }
  }

  tabs.forEach(b=> b.addEventListener('click', ()=> setLang(b.dataset.lang)));
  const initLang = new URLSearchParams(location.search).get('lang') || origLang;
  setLang(initLang);

  function wireFootnotes(lang){
    article.querySelectorAll('.text-body.variant[data-lang="'+lang+'"] sup.note-ref').forEach(sup=>{
      const n = (sup.textContent.match(/\d+/)||[])[0]; if(!n) return;
      const refId = 'fnref-'+n+'-'+lang, noteId='fn-'+n+'-'+lang;
      if(!sup.querySelector('a')){
        const a=document.createElement('a'); a.href='#'+noteId; a.textContent=sup.textContent; a.className='note-ref';
        sup.textContent=''; sup.id=refId; sup.appendChild(a);
      }else{
        sup.id=refId; const a=sup.querySelector('a'); a.classList.add('note-ref'); a.setAttribute('href','#'+noteId);
      }
    });
    const notesMap = {};
    article.querySelectorAll('.notes-list.variant[data-lang="'+lang+'"] li[id^="fn-"]').forEach(li=>{
      const html = li.innerHTML.replace(/^\s*<a[^>]*class="note-num"[\s\S]*?<\/a>\s*/,'').trim();
      notesMap[li.id] = html;
    });
    article.querySelectorAll('.note-ref').forEach(a=>{
      a.onmouseenter = function(e){
        const href=this.getAttribute('href').slice(1);
        const html=notesMap[href]; if(!html) return;
        tooltip.innerHTML=html; tooltip.style.display='block';
        tooltip.style.left=(e.clientX+10)+'px'; tooltip.style.top=(e.clientY+10)+'px';
      };
      a.onmouseleave = ()=>{ tooltip.style.display='none'; tooltip.innerHTML=''; };
      a.onmousemove = (e)=>{ tooltip.style.left=(e.clientX+10)+'px'; tooltip.style.top=(e.clientY+10)+'px'; };
    });
  }
}

const btt = document.getElementById('backToTop');
window.addEventListener('scroll', ()=>{ btt.style.display = window.scrollY>300 ? 'block' : 'none'; });
btt.addEventListener('click', (e)=>{
  e.preventDefault();
  const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduce) window.scrollTo(0,0);
  else window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
</body>
</html>
